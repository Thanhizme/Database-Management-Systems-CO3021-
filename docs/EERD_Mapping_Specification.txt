================================================================================
ENTITY-RELATIONSHIP MODEL - LumbarMRI Database
================================================================================

ğŸ“‹ ENTITIES AND ATTRIBUTES
================================================================================

1. PATIENT
   â”œâ”€â”€ PatientID (PK) - INT, NOT NULL
   â”‚
   â””â”€â”€ Attributes:
       â€¢ PatientID: Unique identifier for each patient

2. STUDY
   â”œâ”€â”€ StudyID (PK) - INT, IDENTITY, NOT NULL
   â”œâ”€â”€ PatientID (FK) - INT, NOT NULL â†’ PATIENT.PatientID
   â”œâ”€â”€ StudyName - NVARCHAR(255), NULL
   â”œâ”€â”€ StudyDate - DATETIME, NULL
   â”‚
   â””â”€â”€ Attributes:
       â€¢ StudyID: Auto-generated unique identifier
       â€¢ PatientID: Foreign key linking to Patient
       â€¢ StudyName: Name/description of the MRI study (e.g., "L-SPINE_LSS_20160309_091629_240000")
       â€¢ StudyDate: Date and time when the study was conducted

3. SERIES
   â”œâ”€â”€ SeriesID (PK) - INT, IDENTITY, NOT NULL
   â”œâ”€â”€ StudyID (FK) - INT, NOT NULL â†’ STUDY.StudyID
   â”œâ”€â”€ SeriesName - NVARCHAR(255), NULL
   â”œâ”€â”€ Orientation - NVARCHAR(50), NULL
   â”œâ”€â”€ FileCount - INT, NULL
   â”‚
   â””â”€â”€ Attributes:
       â€¢ SeriesID: Auto-generated unique identifier
       â€¢ StudyID: Foreign key linking to Study
       â€¢ SeriesName: Name of the image series (e.g., "T2_TSE_SAG_384_0002")
       â€¢ Orientation: Imaging orientation
           - Values: 'Sagittal', 'Transverse', 'Box', 'Spine', 'Unknown'
       â€¢ FileCount: Number of image files in this series

4. IMAGE
   â”œâ”€â”€ ImageID (PK) - INT, IDENTITY, NOT NULL
   â”œâ”€â”€ SeriesID (FK) - INT, NOT NULL â†’ SERIES.SeriesID
   â”œâ”€â”€ FileName - NVARCHAR(255), NULL
   â”œâ”€â”€ FilePath - NVARCHAR(1024), NULL
   â”‚
   â””â”€â”€ Attributes:
       â€¢ ImageID: Auto-generated unique identifier
       â€¢ SeriesID: Foreign key linking to Series
       â€¢ FileName: Name of the image file (e.g., "T2_TSE_SAG__0001_001.ima")
       â€¢ FilePath: Full path to the image file on disk

5. RADIOLOGISTS_DATA
   â”œâ”€â”€ RecordID (PK) - INT, IDENTITY, NOT NULL
   â”œâ”€â”€ PatientID (FK) - INT, NOT NULL â†’ PATIENT.PatientID
   â”œâ”€â”€ Note - NVARCHAR(MAX), NULL
   â”‚
   â””â”€â”€ Attributes:
       â€¢ RecordID: Auto-generated unique identifier
       â€¢ PatientID: Foreign key linking to Patient
       â€¢ Note: Clinical notes/diagnosis from radiologist


================================================================================
RELATIONSHIPS (for EERD)
================================================================================

1. PATIENT â”€â”€< STUDY
   â€¢ Relationship: "has" or "undergoes"
   â€¢ Cardinality: 1:N (One-to-Many)
   â€¢ A Patient can have multiple Studies
   â€¢ A Study belongs to exactly one Patient
   â€¢ Participation: Study total, Patient partial (60 patients have no studies)

2. STUDY â”€â”€< SERIES
   â€¢ Relationship: "contains"
   â€¢ Cardinality: 1:N (One-to-Many)
   â€¢ A Study can contain multiple Series
   â€¢ A Series belongs to exactly one Study
   â€¢ Participation: Both total

3. SERIES â”€â”€< IMAGE
   â€¢ Relationship: "contains"
   â€¢ Cardinality: 1:N (One-to-Many)
   â€¢ A Series can contain multiple Images
   â€¢ An Image belongs to exactly one Series
   â€¢ Participation: Both total

4. PATIENT â”€â”€< RADIOLOGISTS_DATA
   â€¢ Relationship: "has" or "documented_by"
   â€¢ Cardinality: 1:1 (One-to-One)
   â€¢ A Patient has one radiologist note
   â€¢ A note belongs to exactly one Patient
   â€¢ Participation: Both total (all patients have a record, 60 with NULL notes)


================================================================================
CONSTRAINTS
================================================================================

Primary Keys:
  â€¢ PATIENT.PatientID
  â€¢ STUDY.StudyID
  â€¢ SERIES.SeriesID
  â€¢ IMAGE.ImageID
  â€¢ RADIOLOGISTS_DATA.RecordID

Foreign Keys:
  â€¢ STUDY.PatientID â†’ PATIENT.PatientID
  â€¢ SERIES.StudyID â†’ STUDY.StudyID
  â€¢ IMAGE.SeriesID â†’ SERIES.SeriesID
  â€¢ RADIOLOGISTS_DATA.PatientID â†’ PATIENT.PatientID

Domain Constraints:
  â€¢ Orientation âˆˆ {'Sagittal', 'Transverse', 'Box', 'Spine', 'Unknown'}
  â€¢ PatientID > 0
  â€¢ FileCount â‰¥ 0
  â€¢ StudyDate: Valid datetime format


================================================================================
EERD DIAGRAM STRUCTURE (Text Representation)
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PATIENT      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: PatientID   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ has/undergoes
         â”‚
         â”‚ N
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STUDY      â”‚   â”‚ RADIOLOGISTS_DATA   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: StudyID  â”‚   â”‚ PK: RecordID        â”‚
â”‚ FK: PatientIDâ”‚   â”‚ FK: PatientID       â”‚
â”‚ StudyName    â”‚   â”‚ Note                â”‚
â”‚ StudyDate    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ contains
       â”‚
       â”‚ N
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    SERIES      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ PK: SeriesID   â”‚
   â”‚ FK: StudyID    â”‚
   â”‚ SeriesName     â”‚
   â”‚ Orientation    â”‚
   â”‚ FileCount      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ 1
            â”‚
            â”‚ contains
            â”‚
            â”‚ N
        â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   IMAGE    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ PK: ImageIDâ”‚
        â”‚ FK: SeriesIDâ”‚
        â”‚ FileName   â”‚
        â”‚ FilePath   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
MAPPING TO RELATIONAL MODEL
================================================================================

Step 1: Map Strong Entities
----------------------------
PATIENT(PatientID)
  - No additional attributes (just identifier)

Step 2: Map Weak/Regular Entities with Relationships
----------------------------------------------------
STUDY(StudyID, PatientID*, StudyName, StudyDate)
  - StudyID: Primary Key (auto-increment)
  - PatientID: Foreign Key references PATIENT

SERIES(SeriesID, StudyID*, SeriesName, Orientation, FileCount)
  - SeriesID: Primary Key (auto-increment)
  - StudyID: Foreign Key references STUDY

IMAGE(ImageID, SeriesID*, FileName, FilePath)
  - ImageID: Primary Key (auto-increment)
  - SeriesID: Foreign Key references SERIES

RADIOLOGISTS_DATA(RecordID, PatientID*, Note)
  - RecordID: Primary Key (auto-increment)
  - PatientID: Foreign Key references PATIENT

Step 3: Map 1:N Relationships
-----------------------------
All 1:N relationships are already mapped by including the FK in the "N" side:
  â€¢ PATIENT(1) â†’ STUDY(N): FK PatientID in STUDY
  â€¢ STUDY(1) â†’ SERIES(N): FK StudyID in SERIES
  â€¢ SERIES(1) â†’ IMAGE(N): FK SeriesID in IMAGE
  â€¢ PATIENT(1) â†’ RADIOLOGISTS_DATA(1): FK PatientID in RADIOLOGISTS_DATA


================================================================================
ADDITIONAL NOTES FOR EERD
================================================================================

Derived Attributes (can be calculated):
  â€¢ Total number of studies per patient: COUNT(STUDY.StudyID) GROUP BY PatientID
  â€¢ Total images per patient: COUNT(IMAGE.ImageID) via joins
  â€¢ Total series per study: COUNT(SERIES.SeriesID) GROUP BY StudyID

Multi-valued Attributes:
  â€¢ None explicitly, but could consider:
    - Patient.Studies (derived from relationship)
    - Series.Images (derived from relationship)

Optional Attributes (can be NULL):
  â€¢ STUDY.StudyName
  â€¢ STUDY.StudyDate
  â€¢ SERIES.SeriesName
  â€¢ SERIES.Orientation
  â€¢ SERIES.FileCount
  â€¢ IMAGE.FileName
  â€¢ IMAGE.FilePath
  â€¢ RADIOLOGISTS_DATA.Note

Composite Attributes:
  â€¢ Could consider FilePath as composite:
    - Directory path
    - File name
  â€¢ StudyName contains composite info:
    - Procedure type (L-SPINE, C-SPINE)
    - Condition (LSS)
    - DateTime (YYYYMMDD_HHMMSS)
    - Code


================================================================================
DATABASE STATISTICS (Current Data)
================================================================================

PATIENT:          575 records
STUDY:            558 records (515 patients have studies)
SERIES:         3,761 records
IMAGE:         48,345 records
RADIOLOGISTS_DATA: 575 records (515 with notes, 60 NULL)

Cardinality Examples:
  â€¢ Average studies per patient: 558/515 â‰ˆ 1.08
  â€¢ Average series per study: 3,761/558 â‰ˆ 6.74
  â€¢ Average images per series: 48,345/3,761 â‰ˆ 12.85
  â€¢ Max images for one patient: 783 (Patient 230)


================================================================================
END OF ENTITY-RELATIONSHIP SPECIFICATION
================================================================================
